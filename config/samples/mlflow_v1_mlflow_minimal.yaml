apiVersion: mlflow.opendatahub.io/v1
kind: MLflow
metadata:
  name: mlflow
spec:
  # Minimal configuration - direct access without kube-rbac-proxy
  # Suitable for development/testing environments
  # WARNING: No authentication/authorization - use only in trusted environments

  # Disable kube-rbac-proxy for direct access to MLflow
  kubeRbacProxy:
    enabled: false

  # MLflow container image
  image:
    image: quay.io/opendatahub/mlflow:latest
    pullPolicy: Always

  # Number of replicas
  replicas: 1

  # Compute resources (minimal for development)
  resources:
    requests:
      cpu: "100m"
      memory: "256Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"

  # Local file-based storage with PVC
  storage:
    size: 5Gi
    storageClassName: ""  # Use default storage class
    accessMode: ReadWriteOnce

  backendStoreUri: "sqlite:////mlflow/mlflow.db"
  registryStoreUri: "sqlite:////mlflow/mlflow.db"
  artifactsDestination: "file:///mlflow/artifacts"

  # Environment variables
  env:
    - name: MLFLOW_LOGGING_LEVEL
      value: DEBUG
